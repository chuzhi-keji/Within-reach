<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberKey - 键盘助手</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        :root {
            --cyber-blue: #00eeff;
            --cyber-pink: #ff00aa;
            --cyber-purple: #7d00ff;
            --dark-bg: #0a0a1a;
            --panel-bg: rgba(10, 15, 30, 0.9);
            --panel-border: rgba(0, 238, 255, 0.3);
            --key-bg: rgba(30, 40, 70, 0.8);
            --key-active: rgba(0, 238, 255, 0.3);
        }
        
        body {
            background: linear-gradient(135deg, #050510 0%, #0d0d2b 100%);
            color: #e0e0ff;
            min-height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 238, 255, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(255, 0, 170, 0.1) 0%, transparent 40%);
            z-index: -1;
        }
        
        .app-container {
            width: 100%;
            max-width: 1000px;
            height: 95vh;
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 20px;
            box-shadow: 
                0 0 20px rgba(0, 238, 255, 0.3),
                0 0 40px rgba(125, 0, 255, 0.2);
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid var(--panel-border);
            background: rgba(15, 20, 40, 0.8);
            position: relative;
        }
        
        .header h1 {
            font-size: 1.8rem;
            background: linear-gradient(90deg, var(--cyber-blue), var(--cyber-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(0, 238, 255, 0.5);
            letter-spacing: 1px;
        }
        
        .header .back-btn {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--cyber-blue);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .header .back-btn:hover {
            color: var(--cyber-pink);
            text-shadow: 0 0 10px rgba(255, 0, 170, 0.7);
        }
        
        .content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            position: relative;
        }
        
        .page {
            display: none;
            flex-direction: column;
            height: 100%;
        }
        
        .page.active {
            display: flex;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 连接方式选择界面 */
        .connection-options {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-top: 30px;
        }
        
        .option-card {
            background: rgba(20, 25, 50, 0.7);
            border: 1px solid var(--panel-border);
            border-radius: 15px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 238, 255, 0.2);
            border-color: var(--cyber-blue);
        }
        
        .option-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--cyber-blue), var(--cyber-pink));
        }
        
        .option-icon {
            font-size: 2.5rem;
            color: var(--cyber-blue);
        }
        
        .option-card.wifi .option-icon {
            color: var(--cyber-pink);
        }
        
        .option-card.usb .option-icon {
            color: var(--cyber-purple);
        }
        
        .option-title {
            font-size: 1.3rem;
            font-weight: 600;
            background: linear-gradient(90deg, var(--cyber-blue), var(--cyber-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .option-desc {
            text-align: center;
            font-size: 0.9rem;
            color: #a0a0ff;
        }
        
        /* 主菜单界面 */
        .main-menu {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .menu-item {
            background: rgba(25, 30, 60, 0.7);
            border: 1px solid var(--panel-border);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .menu-item:hover {
            transform: translateX(5px);
            border-color: var(--cyber-blue);
            background: rgba(30, 35, 70, 0.8);
            box-shadow: 0 5px 15px rgba(0, 238, 255, 0.2);
        }
        
        .menu-icon {
            font-size: 1.8rem;
            color: var(--cyber-blue);
            min-width: 40px;
            text-align: center;
        }
        
        .menu-text {
            flex: 1;
        }
        
        .menu-text h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
            color: #fff;
        }
        
        .menu-text p {
            font-size: 0.85rem;
            color: #a0a0ff;
        }
        
        /* 普通键盘模式 */
        .normal-keyboard-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            gap: 20px;
        }
        
        .monitor-area {
            flex: 1;
            background: rgba(0, 5, 15, 0.8);
            border: 1px solid var(--panel-border);
            border-radius: 10px;
            padding: 15px;
            font-family: monospace;
            overflow-y: auto;
            min-height: 150px;
        }
        
        .tools-area {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        
        .tool-btn {
            background: rgba(30, 35, 70, 0.8);
            border: 1px solid var(--panel-border);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px 10px;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tool-btn:hover {
            background: rgba(40, 45, 90, 0.9);
            border-color: var(--cyber-blue);
            transform: translateY(-3px);
        }
        
        .tool-icon {
            font-size: 1.5rem;
            color: var(--cyber-blue);
        }
        
        .tool-name {
            font-size: 0.85rem;
            text-align: center;
        }
        
        .keyboard-area {
            flex: 1;
            background: rgba(20, 25, 50, 0.7);
            border: 1px solid var(--panel-border);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--cyber-blue);
        }
        
        /* 自定义键盘模式 */
        .custom-keyboard-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 30px;
        }
        
        .keyboard-option {
            background: rgba(25, 30, 60, 0.7);
            border: 2px solid var(--cyber-purple);
            border-radius: 15px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .keyboard-option:hover {
            transform: scale(1.03);
            border-color: var(--cyber-blue);
            box-shadow: 0 0 20px rgba(125, 0, 255, 0.3);
        }
        
        .keyboard-option-icon {
            font-size: 2.5rem;
            color: var(--cyber-purple);
        }
        
        /* 键盘设计器 - 来自文本1 */
        .designer-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
        }
        
        .designer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 0;
            border-bottom: 1px solid var(--panel-border);
        }
        
        .designer-tools {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .design-tool {
            background: rgba(30, 35, 70, 0.8);
            border: 1px solid var(--panel-border);
            border-radius: 8px;
            padding: 12px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .design-tool:hover {
            background: rgba(40, 45, 90, 0.9);
            border-color: var(--cyber-blue);
            transform: translateY(-2px);
        }
        
        .design-tool.active {
            background: rgba(0, 150, 200, 0.3);
            border-color: var(--cyber-blue);
        }
        
        .design-canvas {
            flex: 1;
            background: rgba(0, 5, 15, 0.8);
            border: 1px solid var(--panel-border);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .add-key-prompt {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(20, 30, 60, 0.9);
            border: 2px solid var(--cyber-blue);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            z-index: 10;
            box-shadow: 0 0 30px rgba(0, 238, 255, 0.5);
        }
        
        .add-key-prompt h2 {
            margin-bottom: 20px;
            font-size: 1.8rem;
            color: var(--cyber-blue);
            text-shadow: 0 0 10px rgba(0, 238, 255, 0.7);
        }
        
        .add-key-btn {
            background: linear-gradient(135deg, var(--cyber-blue), var(--cyber-purple));
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 150, 255, 0.4);
        }
        
        .add-key-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 150, 255, 0.6);
        }
        
        .key-preview {
            position: absolute;
            background: var(--key-bg);
            border: 2px solid var(--cyber-blue);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: move;
            transition: all 0.2s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            user-select: none;
            z-index: 5;
        }
        
        .key-preview:hover {
            border-color: var(--cyber-pink);
            box-shadow: 0 0 15px rgba(255, 0, 170, 0.4);
        }
        
        .key-preview.active {
            z-index: 10;
            border-width: 3px;
            box-shadow: 0 0 20px rgba(0, 238, 255, 0.7);
        }
        
        .key-preview.dragging {
            opacity: 0.9;
            transform: scale(1.05);
            z-index: 20;
        }
        
        .key-label {
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        .key-icon {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }
        
        .key-handle {
            position: absolute;
            width: 15px;
            height: 15px;
            background: var(--cyber-pink);
            border-radius: 50%;
            cursor: pointer;
            z-index: 11;
            box-shadow: 0 0 5px rgba(255, 0, 170, 0.7);
        }
        
        .handle-top {
            top: -7px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .handle-bottom {
            bottom: -7px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .handle-left {
            left: -7px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .handle-right {
            right: -7px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        /* 按键编辑面板 */
        .edit-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 320px;
            background: rgba(20, 25, 50, 0.95);
            border: 1px solid var(--panel-border);
            border-radius: 15px;
            padding: 20px;
            z-index: 100;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            display: none;
        }
        
        .edit-panel.active {
            display: block;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .edit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--panel-border);
        }
        
        .edit-header h2 {
            font-size: 1.3rem;
            color: var(--cyber-blue);
        }
        
        .close-edit {
            background: none;
            border: none;
            color: var(--cyber-pink);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .edit-section {
            margin-bottom: 20px;
        }
        
        .edit-section h3 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--cyber-blue);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: #a0a0ff;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            background: rgba(10, 15, 30, 0.7);
            border: 1px solid var(--panel-border);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--cyber-blue);
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--cyber-blue), var(--cyber-purple));
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ff3366, #ff00aa);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* 绑定面板 */
        .bind-panel {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            background: rgba(20, 25, 50, 0.95);
            border: 1px solid var(--panel-border);
            border-radius: 15px;
            padding: 20px;
            z-index: 100;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            display: none;
        }
        
        .bind-panel.active {
            display: block;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translate(-50%, 30px); }
            to { opacity: 1; transform: translate(-50%, 0); }
        }
        
        .bind-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .bind-option {
            background: rgba(30, 35, 70, 0.8);
            border: 1px solid var(--panel-border);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .bind-option:hover {
            background: rgba(40, 45, 90, 0.9);
            border-color: var(--cyber-blue);
            transform: translateY(-3px);
        }
        
        .bind-icon {
            font-size: 1.8rem;
            color: var(--cyber-blue);
            margin-bottom: 10px;
        }
        
        /* 棘轮按键 */
        .ratchet-key {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }
        
        .ratchet-wheel {
            width: 70%;
            height: 70%;
            border-radius: 50%;
            background: conic-gradient(
                var(--cyber-blue) 0% 10%,
                transparent 10% 20%,
                var(--cyber-blue) 20% 30%,
                transparent 30% 40%,
                var(--cyber-blue) 40% 50%,
                transparent 50% 60%,
                var(--cyber-blue) 60% 70%,
                transparent 70% 80%,
                var(--cyber-blue) 80% 90%,
                transparent 90% 100%
            );
            position: relative;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .ratchet-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30%;
            height: 30%;
            background: var(--key-bg);
            border-radius: 50%;
            border: 2px solid var(--cyber-blue);
        }
        
        /* 按键类型选择 */
        .key-type-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .key-type {
            width: 100px;
            height: 100px;
            background: rgba(30, 35, 70, 0.8);
            border: 2px solid var(--panel-border);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .key-type:hover {
            transform: translateY(-5px);
            border-color: var(--cyber-blue);
            box-shadow: 0 5px 15px rgba(0, 238, 255, 0.2);
        }
        
        .key-type-icon {
            font-size: 2rem;
            color: var(--cyber-blue);
        }
        
        .key-type-name {
            font-size: 0.9rem;
            text-align: center;
        }
        
        /* 方向指示器 */
        .direction-indicator {
            position: absolute;
            display: none;
            pointer-events: none;
        }
        
        .direction-arrow {
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
        }
        
        .arrow-up {
            border-width: 0 10px 15px 10px;
            border-color: transparent transparent var(--cyber-pink) transparent;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .arrow-down {
            border-width: 15px 10px 0 10px;
            border-color: var(--cyber-pink) transparent transparent transparent;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .arrow-left {
            border-width: 10px 15px 10px 0;
            border-color: transparent var(--cyber-pink) transparent transparent;
            left: -20px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .arrow-right {
            border-width: 10px 0 10px 15px;
            border-color: transparent transparent transparent var(--cyber-pink);
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        /* 自动化模式 */
        .automation-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 30px;
        }
        
        .automation-option {
            background: rgba(25, 30, 60, 0.7);
            border: 1px solid var(--panel-border);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .automation-option:hover {
            transform: translateX(5px);
            border-color: var(--cyber-pink);
            box-shadow: 0 5px 15px rgba(255, 0, 170, 0.2);
        }
        
        .automation-icon {
            font-size: 1.8rem;
            color: var(--cyber-pink);
        }
        
        /* 软件搭配模式 */
        .software-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        
        .software-card {
            background: rgba(30, 35, 70, 0.8);
            border: 1px solid var(--panel-border);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .software-card:hover {
            transform: scale(1.05);
            border-color: var(--cyber-purple);
            box-shadow: 0 0 20px rgba(125, 0, 255, 0.3);
        }
        
        .software-icon {
            font-size: 2rem;
            color: var(--cyber-purple);
        }
        
        .software-name {
            font-size: 1rem;
            text-align: center;
            font-weight: 600;
        }
        
        /* 状态指示器 */
        .status-bar {
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(15, 20, 40, 0.8);
            border-top: 1px solid var(--panel-border);
            font-size: 0.85rem;
            color: #a0a0ff;
        }
        
        .connection-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--cyber-blue);
            box-shadow: 0 0 10px var(--cyber-blue);
        }
        
        /* 特效元素 */
        .cyber-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(rgba(0, 238, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 238, 255, 0.05) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
            z-index: -1;
        }
        
        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: rgba(0, 238, 255, 0.2);
            box-shadow: 0 0 10px rgba(0, 238, 255, 0.5);
            animation: scan 4s linear infinite;
            opacity: 0.7;
        }
        
        @keyframes scan {
            0% { top: 0; }
            100% { top: 100%; }
        }
        
        .glow {
            position: absolute;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -2;
        }
        
        .glow-blue {
            background: var(--cyber-blue);
            top: -100px;
            left: -100px;
            opacity: 0.3;
        }
        
        .glow-pink {
            background: var(--cyber-pink);
            bottom: -100px;
            right: -100px;
            opacity: 0.3;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="cyber-grid"></div>
        <div class="scan-line"></div>
        <div class="glow glow-blue"></div>
        <div class="glow glow-pink"></div>
        
        <div class="header">
            <h1>CyberKey Assistant</h1>
        </div>
        
        <div class="content">
            <!-- 连接方式选择界面 -->
            <div id="connection-page" class="page active">
                <div class="connection-options">
                    <div class="option-card bluetooth" onclick="navigateTo('main-menu')">
                        <i class="fas fa-bluetooth option-icon"></i>
                        <h2 class="option-title">蓝牙连接</h2>
                        <p class="option-desc">通过蓝牙与电脑配对连接</p>
                    </div>
                    <div class="option-card wifi" onclick="navigateTo('main-menu')">
                        <i class="fas fa-wifi option-icon"></i>
                        <h2 class="option-title">WiFi连接</h2>
                        <p class="option-desc">在同一网络下连接设备</p>
                    </div>
                    <div class="option-card usb" onclick="navigateTo('main-menu')">
                        <i class="fas fa-usb option-icon"></i>
                        <h2 class="option-title">数据线连接</h2>
                        <p class="option-desc">通过USB数据线连接</p>
                    </div>
                </div>
            </div>
            
            <!-- 主菜单界面 -->
            <div id="main-menu" class="page">
                <div class="main-menu">
                    <div class="menu-item" onclick="navigateTo('connection-page')">
                        <div class="menu-icon"><i class="fas fa-sync-alt"></i></div>
                        <div class="menu-text">
                            <h3>连接方式切换</h3>
                            <p>更改当前连接方式</p>
                        </div>
                    </div>
                    <div class="menu-item" onclick="navigateTo('normal-keyboard')">
                        <div class="menu-icon"><i class="fas fa-keyboard"></i></div>
                        <div class="menu-text">
                            <h3>普通键盘模式</h3>
                            <p>标准键盘输入功能</p>
                        </div>
                    </div>
                    <div class="menu-item" onclick="navigateTo('custom-keyboard')">
                        <div class="menu-icon"><i class="fas fa-cogs"></i></div>
                        <div class="menu-text">
                            <h3>自定义键盘模式</h3>
                            <p>创建个性化键盘布局</p>
                        </div>
                    </div>
                    <div class="menu-item" onclick="navigateTo('automation-mode')">
                        <div class="menu-icon"><i class="fas fa-robot"></i></div>
                        <div class="menu-text">
                            <h3>自动化模式</h3>
                            <p>创建和执行宏命令</p>
                        </div>
                    </div>
                    <div class="menu-item" onclick="navigateTo('software-mode')">
                        <div class="menu-icon"><i class="fas fa-laptop-code"></i></div>
                        <div class="menu-text">
                            <h3>软件搭配模式</h3>
                            <p>为特定软件定制功能</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 普通键盘模式 -->
            <div id="normal-keyboard" class="page">
                <div class="normal-keyboard-container">
                    <div class="monitor-area">
                        <p>> 电脑输入监听区域...</p>
                        <p>> 已连接: Windows PC</p>
                        <p>> 最后输入: Hello World!</p>
                        <p>> 状态: 活动</p>
                    </div>
                    
                    <div class="tools-area">
                        <div class="tool-btn">
                            <i class="fas fa-image tool-icon"></i>
                            <div class="tool-name">添加图片</div>
                        </div>
                        <div class="tool-btn">
                            <i class="fas fa-file tool-icon"></i>
                            <div class="tool-name">添加文件</div>
                        </div>
                        <div class="tool-btn">
                            <i class="fas fa-video tool-icon"></i>
                            <div class="tool-name">添加视频</div>
                        </div>
                        <div class="tool-btn">
                            <i class="fas fa-music tool-icon"></i>
                            <div class="tool-name">添加音频</div>
                        </div>
                        <div class="tool-btn">
                            <i class="fas fa-link tool-icon"></i>
                            <div class="tool-name">添加链接</div>
                        </div>
                        <div class="tool-btn">
                            <i class="fas fa-code tool-icon"></i>
                            <div class="tool-name">代码片段</div>
                        </div>
                    </div>
                    
                    <div class="keyboard-area">
                        <i class="fas fa-mobile-alt"></i> 手机键盘区域
                    </div>
                </div>
            </div>
            
            <!-- 自定义键盘模式 -->
            <div id="custom-keyboard" class="page">
                <div class="custom-keyboard-options">
                    <div class="keyboard-option" onclick="navigateTo('keyboard-designer')">
                        <i class="fas fa-plus-circle keyboard-option-icon"></i>
                        <h2 class="option-title">创建新的键盘</h2>
                        <p class="option-desc">设计全新的自定义键盘布局</p>
                    </div>
                    <div class="keyboard-option">
                        <i class="fas fa-history keyboard-option-icon"></i>
                        <h2 class="option-title">历史键盘</h2>
                        <p class="option-desc">查看和使用之前创建的键盘</p>
                    </div>
                </div>
            </div>
            
            <!-- 键盘设计器 - 来自文本1 -->
            <div id="keyboard-designer" class="page">
                <div class="designer-container">
                    <div class="designer-header">
                        <button class="back-btn" onclick="goBack()"><i class="fas fa-arrow-left"></i></button>
                        <h2><i class="fas fa-keyboard"></i> 自定义键盘设计器</h2>
                        <div class="designer-tools">
                            <div class="design-tool" id="save-btn">
                                <i class="fas fa-save"></i> 保存键盘
                            </div>
                            <div class="design-tool" id="reset-btn">
                                <i class="fas fa-redo"></i> 重置
                            </div>
                            <div class="design-tool" id="add-key-btn">
                                <i class="fas fa-plus-circle"></i> 添加按键
                            </div>
                        </div>
                    </div>
                    
                    <div class="design-canvas" id="design-canvas">
                        <div class="add-key-prompt">
                            <h2><i class="fas fa-plus-circle"></i> 添加按键</h2>
                            <p>开始设计您的自定义键盘布局</p>
                            <div class="key-type-selector">
                                <div class="key-type" data-type="square">
                                    <div class="key-type-icon"><i class="fas fa-square"></i></div>
                                    <div class="key-type-name">方形按键</div>
                                </div>
                                <div class="key-type" data-type="rectangle">
                                    <div class="key-type-icon"><i class="fas fa-square-full"></i></div>
                                    <div class="key-type-name">长方形按键</div>
                                </div>
                                <div class="key-type" data-type="circle">
                                    <div class="key-type-icon"><i class="fas fa-circle"></i></div>
                                    <div class="key-type-name">圆形按键</div>
                                </div>
                                <div class="key-type" data-type="ratchet">
                                    <div class="key-type-icon"><i class="fas fa-cog"></i></div>
                                    <div class="key-type-name">棘轮按键</div>
                                </div>
                            </div>
                            <button class="add-key-btn" onclick="hidePrompt()">开始设计</button>
                        </div>
                        
                        <!-- 按键示例 -->
                        <div class="key-preview" style="width: 80px; height: 80px; top: 100px; left: 200px;">
                            <div class="key-label">A</div>
                        </div>
                        
                        <div class="key-preview" style="width: 120px; height: 60px; top: 200px; left: 150px; background: rgba(125, 0, 255, 0.5);">
                            <div class="key-label">Ctrl</div>
                        </div>
                        
                        <div class="key-preview" style="width: 70px; height: 70px; top: 300px; left: 300px; border-radius: 50%;">
                            <div class="key-label"><i class="fas fa-play"></i></div>
                        </div>
                        
                        <div class="key-preview" style="width: 90px; height: 90px; top: 150px; left: 400px; border-radius: 50%; background: rgba(255, 0, 170, 0.3);">
                            <div class="ratchet-key">
                                <div class="ratchet-wheel">
                                    <div class="ratchet-center"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 方向指示器 -->
                        <div class="direction-indicator" id="direction-indicator">
                            <div class="direction-arrow arrow-up"></div>
                            <div class="direction-arrow arrow-down"></div>
                            <div class="direction-arrow arrow-left"></div>
                            <div class="direction-arrow arrow-right"></div>
                        </div>
                    </div>
                    
                    <!-- 编辑面板 -->
                    <div class="edit-panel" id="edit-panel">
                        <div class="edit-header">
                            <h2><i class="fas fa-edit"></i> 按键设置</h2>
                            <button class="close-edit" onclick="closeEditPanel()"><i class="fas fa-times"></i></button>
                        </div>
                        
                        <div class="edit-section">
                            <h3>基本设置</h3>
                            <div class="form-group">
                                <label for="key-label">按键标签</label>
                                <input type="text" id="key-label" class="form-control" placeholder="输入按键标签">
                            </div>
                            <div class="form-group">
                                <label for="key-size">尺寸 (px)</label>
                                <input type="range" id="key-size" class="form-control" min="40" max="200" value="80">
                            </div>
                            <div class="form-group">
                                <label for="key-opacity">透明度</label>
                                <input type="range" id="key-opacity" class="form-control" min="10" max="100" value="100">
                            </div>
                        </div>
                        
                        <div class="edit-section">
                            <h3>图标设置</h3>
                            <div class="form-group">
                                <label>默认图标</label>
                                <div style="display: flex; gap: 10px; margin-top: 5px;">
                                    <button class="btn" style="flex: 1;"><i class="fas fa-font"></i> 文字</button>
                                    <button class="btn" style="flex: 1;"><i class="fas fa-image"></i> 上传</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>点击状态图标</label>
                                <div style="display: flex; gap: 10px; margin-top: 5px;">
                                    <button class="btn" style="flex: 1;"><i class="fas fa-font"></i> 文字</button>
                                    <button class="btn" style="flex: 1;"><i class="fas fa-image"></i> 上传</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-danger" onclick="deleteKey()"><i class="fas fa-trash"></i> 删除</button>
                            <button class="btn btn-primary" onclick="saveKeySettings()"><i class="fas fa-save"></i> 保存</button>
                        </div>
                    </div>
                    
                    <!-- 绑定面板 -->
                    <div class="bind-panel" id="bind-panel">
                        <div class="edit-header">
                            <h2><i class="fas fa-link"></i> 按键绑定设置</h2>
                            <button class="close-edit" onclick="closeBindPanel()"><i class="fas fa-times"></i></button>
                        </div>
                        
                        <p>请选择要绑定的功能或按键：</p>
                        
                        <div class="bind-options">
                            <div class="bind-option">
                                <div class="bind-icon"><i class="fas fa-keyboard"></i></div>
                                <div>单个按键</div>
                            </div>
                            <div class="bind-option">
                                <div class="bind-icon"><i class="fas fa-keyboard"></i>+</div>
                                <div>组合按键</div>
                            </div>
                            <div class="bind-option">
                                <div class="bind-icon"><i class="fas fa-robot"></i></div>
                                <div>自动化功能</div>
                            </div>
                            <div class="bind-option">
                                <div class="bind-icon"><i class="fas fa-mouse"></i></div>
                                <div>鼠标动作</div>
                            </div>
                            <div class="bind-option">
                                <div class="bind-icon"><i class="fas fa-copy"></i></div>
                                <div>粘贴功能</div>
                            </div>
                            <div class="bind-option">
                                <div class="bind-icon"><i class="fas fa-magic"></i></div>
                                <div>宏命令</div>
                            </div>
                            <div class="bind-option">
                                <div class="bind-icon"><i class="fas fa-sensor"></i></div>
                                <div>传感器</div>
                            </div>
                            <div class="bind-option">
                                <div class="bind-icon"><i class="fas fa-code"></i></div>
                                <div>自定义脚本</div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-danger" onclick="closeBindPanel()">取消</button>
                            <button class="btn btn-primary" onclick="saveBinding()">保存绑定</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 自动化模式 -->
            <div id="automation-mode" class="page">
                <div class="automation-options">
                    <div class="automation-option" onclick="navigateTo('macro-editor')">
                        <i class="fas fa-plus-circle automation-icon"></i>
                        <div class="menu-text">
                            <h3>添加新的宏</h3>
                            <p>创建新的自动化命令序列</p>
                        </div>
                    </div>
                    <div class="automation-option">
                        <i class="fas fa-history automation-icon"></i>
                        <div class="menu-text">
                            <h3>历史的宏</h3>
                            <p>查看和使用之前创建的宏</p>
                        </div>
                    </div>
                    <div class="automation-option">
                        <i class="fas fa-paste automation-icon"></i>
                        <div class="menu-text">
                            <h3>粘贴功能</h3>
                            <p>顺序/逆序访问复制历史</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 软件搭配模式 -->
            <div id="software-mode" class="page">
                <div class="software-grid">
                    <div class="software-card">
                        <i class="fab fa-blender software-icon"></i>
                        <div class="software-name">Blender</div>
                    </div>
                    <div class="software-card">
                        <i class="fab fa-unity software-icon"></i>
                        <div class="software-name">Unity</div>
                    </div>
                    <div class="software-card">
                        <i class="fab fa-adobe software-icon"></i>
                        <div class="software-name">Photoshop</div>
                    </div>
                    <div class="software-card">
                        <i class="fas fa-video software-icon"></i>
                        <div class="software-name">Premiere Pro</div>
                    </div>
                    <div class="software-card">
                        <i class="fas fa-code software-icon"></i>
                        <div class="software-name">VS Code</div>
                    </div>
                    <div class="software-card">
                        <i class="fas fa-gamepad software-icon"></i>
                        <div class="software-name">游戏控制器</div>
                    </div>
                </div>
            </div>
            
            <!-- 宏编辑器 -->
            <div id="macro-editor" class="page">
                <div class="designer-container">
                    <h2>宏命令编辑器</h2>
                    <div class="designer-tools">
                        <div class="design-tool">
                            <i class="fas fa-keyboard"></i> 键盘输入
                        </div>
                        <div class="design-tool">
                            <i class="fas fa-mouse"></i> 鼠标操作
                        </div>
                        <div class="design-tool">
                            <i class="fas fa-vibration"></i> 手机震动
                        </div>
                        <div class="design-tool">
                            <i class="fas fa-sensor"></i> 传感器
                        </div>
                    </div>
                    
                    <div class="monitor-area" style="margin-top: 15px;">
                        <h3>当前宏命令序列：</h3>
                        <p>1. 按下 Ctrl+C</p>
                        <p>2. 等待 500ms</p>
                        <p>3. 模拟鼠标移动至 (100, 200)</p>
                        <p>4. 模拟鼠标左键点击</p>
                        <p>5. 按下 Ctrl+V</p>
                    </div>
                    
                    <div class="tools-area" style="margin-top: 15px; grid-template-columns: repeat(4, 1fr);">
                        <div class="tool-btn">
                            <i class="fas fa-plus"></i>
                            <div class="tool-name">添加步骤</div>
                        </div>
                        <div class="tool-btn">
                            <i class="fas fa-trash"></i>
                            <div class="tool-name">删除步骤</div>
                        </div>
                        <div class="tool-btn">
                            <i class="fas fa-play"></i>
                            <div class="tool-name">测试</div>
                        </div>
                        <div class="tool-btn">
                            <i class="fas fa-save"></i>
                            <div class="tool-name">保存</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="status-bar">
            <div class="connection-status">
                <div class="status-indicator"></div>
                <span>设计模式 | 已添加 4 个按键</span>
            </div>
            <div>CyberKey Designer v2.0</div>
        </div>
    </div>

    <script>
        // 页面导航函数
        function navigateTo(pageId) {
            // 隐藏所有页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示目标页面
            document.getElementById(pageId).classList.add('active');
            
            // 更新返回按钮
            const header = document.querySelector('.header');
            if (pageId !== 'connection-page') {
                if (!header.querySelector('.back-btn')) {
                    const backBtn = document.createElement('button');
                    backBtn.className = 'back-btn';
                    backBtn.innerHTML = '<i class="fas fa-arrow-left"></i>';
                    backBtn.onclick = goBack;
                    header.insertBefore(backBtn, header.querySelector('h1'));
                }
            } else {
                const backBtn = header.querySelector('.back-btn');
                if (backBtn) backBtn.remove();
            }
        }
        
        // 返回上一页
        function goBack() {
            const currentPage = document.querySelector('.page.active');
            const pages = {
                'main-menu': 'connection-page',
                'normal-keyboard': 'main-menu',
                'custom-keyboard': 'main-menu',
                'keyboard-designer': 'custom-keyboard',
                'automation-mode': 'main-menu',
                'macro-editor': 'automation-mode',
                'software-mode': 'main-menu'
            };
            
            if (pages[currentPage.id]) {
                navigateTo(pages[currentPage.id]);
            }
        }
        
        // 当前选中的按键
        let currentKey = null;
        let isDragging = false;
        let dragStartX, dragStartY;
        let keyStartX, keyStartY;
        
        // 页面初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 添加按键事件监听
            document.querySelectorAll('.key-type').forEach(type => {
                type.addEventListener('click', function() {
                    const keyType = this.getAttribute('data-type');
                    createNewKey(keyType);
                    document.querySelector('.add-key-prompt').style.display = 'none';
                });
            });
            
            // 设置按键事件
            setupKeyEvents();
            
            // 添加设计器按钮事件
            document.getElementById('add-key-btn').addEventListener('click', function() {
                document.querySelector('.add-key-prompt').style.display = 'block';
            });
            
            document.getElementById('save-btn').addEventListener('click', function() {
                alert('键盘布局已保存！');
            });
            
            document.getElementById('reset-btn').addEventListener('click', function() {
                if(confirm('确定要重置设计器吗？所有未保存的更改将会丢失。')) {
                    document.querySelectorAll('.key-preview').forEach(key => {
                        if(!key.classList.contains('example')) {
                            key.remove();
                        }
                    });
                }
            });
        });
        
        // 隐藏提示
        function hidePrompt() {
            document.querySelector('.add-key-prompt').style.display = 'none';
        }
        
        // 创建新按键
        function createNewKey(type) {
            const canvas = document.getElementById('design-canvas');
            const key = document.createElement('div');
            key.className = 'key-preview';
            
            // 根据类型设置样式
            switch(type) {
                case 'square':
                    key.style.width = '80px';
                    key.style.height = '80px';
                    key.style.top = '200px';
                    key.style.left = '200px';
                    key.innerHTML = '<div class="key-label">新按键</div>';
                    break;
                case 'rectangle':
                    key.style.width = '120px';
                    key.style.height = '60px';
                    key.style.top = '300px';
                    key.style.left = '300px';
                    key.innerHTML = '<div class="key-label">功能键</div>';
                    key.style.background = 'rgba(125, 0, 255, 0.5)';
                    break;
                case 'circle':
                    key.style.width = '80px';
                    key.style.height = '80px';
                    key.style.borderRadius = '50%';
                    key.style.top = '150px';
                    key.style.left = '400px';
                    key.innerHTML = '<div class="key-label"><i class="fas fa-play"></i></div>';
                    break;
                case 'ratchet':
                    key.style.width = '90px';
                    key.style.height = '90px';
                    key.style.borderRadius = '50%';
                    key.style.top = '250px';
                    key.style.left = '500px';
                    key.style.background = 'rgba(255, 0, 170, 0.3)';
                    key.innerHTML = `
                        <div class="ratchet-key">
                            <div class="ratchet-wheel">
                                <div class="ratchet-center"></div>
                            </div>
                        </div>
                    `;
                    break;
            }
            
            canvas.appendChild(key);
            setupKeyEvents();
            showBindPanel();
        }
        
        // 设置按键事件
        function setupKeyEvents() {
            document.querySelectorAll('.key-preview').forEach(key => {
                // 移除现有事件监听器
                key.removeEventListener('mousedown', startDrag);
                key.removeEventListener('click', handleKeyClick);
                
                // 添加新事件监听器
                key.addEventListener('mousedown', startDrag);
                key.addEventListener('click', handleKeyClick);
            });
        }
        
        // 处理按键点击
        function handleKeyClick(e) {
            // 防止拖拽结束时触发点击
            if (isDragging) {
                isDragging = false;
                return;
            }
            
            // 设置当前选中按键
            document.querySelectorAll('.key-preview').forEach(k => {
                k.classList.remove('active');
            });
            
            e.currentTarget.classList.add('active');
            currentKey = e.currentTarget;
            
            // 显示编辑面板
            showEditPanel();
        }
        
        // 开始拖拽
        function startDrag(e) {
            if (e.target.classList.contains('key-handle')) return;
            
            const key = e.currentTarget;
            isDragging = true;
            currentKey = key;
            
            // 添加拖拽状态
            key.classList.add('dragging');
            
            // 显示方向指示器
            const indicator = document.getElementById('direction-indicator');
            indicator.style.display = 'block';
            indicator.style.top = key.offsetTop + 'px';
            indicator.style.left = key.offsetLeft + 'px';
            
            // 其他按键淡出
            document.querySelectorAll('.key-preview').forEach(k => {
                if (k !== key) {
                    k.style.opacity = '0.3';
                }
            });
            
            // 记录初始位置
            dragStartX = e.clientX;
            dragStartY = e.clientY;
            keyStartX = key.offsetLeft;
            keyStartY = key.offsetTop;
            
            // 添加事件监听
            document.addEventListener('mousemove', dragKey);
            document.addEventListener('mouseup', stopDrag);
            
            e.preventDefault();
        }
        
        // 拖拽按键
        function dragKey(e) {
            if (!isDragging) return;
            
            const dx = e.clientX - dragStartX;
            const dy = e.clientY - dragStartY;
            
            currentKey.style.left = (keyStartX + dx) + 'px';
            currentKey.style.top = (keyStartY + dy) + 'px';
            
            // 更新方向指示器位置
            const indicator = document.getElementById('direction-indicator');
            indicator.style.top = currentKey.offsetTop + 'px';
            indicator.style.left = currentKey.offsetLeft + 'px';
        }
        
        // 停止拖拽
        function stopDrag() {
            if (!isDragging) return;
            
            isDragging = false;
            currentKey.classList.remove('dragging');
            
            // 隐藏方向指示器
            document.getElementById('direction-indicator').style.display = 'none';
            
            // 恢复其他按键
            document.querySelectorAll('.key-preview').forEach(k => {
                k.style.opacity = '';
            });
            
            // 移除事件监听
            document.removeEventListener('mousemove', dragKey);
            document.removeEventListener('mouseup', stopDrag);
            
            // 显示绑定面板
            showBindPanel();
        }
        
        // 显示编辑面板
        function showEditPanel() {
            document.getElementById('edit-panel').classList.add('active');
        }
        
        // 关闭编辑面板
        function closeEditPanel() {
            document.getElementById('edit-panel').classList.remove('active');
            if (currentKey) {
                currentKey.classList.remove('active');
                currentKey = null;
            }
        }
        
        // 显示绑定面板
        function showBindPanel() {
            document.getElementById('bind-panel').classList.add('active');
        }
        
        // 关闭绑定面板
        function closeBindPanel() {
            document.getElementById('bind-panel').classList.remove('active');
        }
        
        // 保存按键设置
        function saveKeySettings() {
            if (currentKey) {
                const label = document.getElementById('key-label').value;
                if (label) {
                    currentKey.querySelector('.key-label').textContent = label;
                }
                alert('按键设置已保存！');
            }
            closeEditPanel();
        }
        
        // 删除按键
        function deleteKey() {
            if (currentKey && confirm('确定要删除这个按键吗？')) {
                currentKey.remove();
                closeEditPanel();
            }
        }
        
        // 保存绑定
        function saveBinding() {
            alert('按键绑定已保存！');
            closeBindPanel();
        }
    </script>
</body>
</html>